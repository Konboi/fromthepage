=javascript_include_tag "openseadragon.js"

.image-container(id="image_container" style="width:100%;height:100%;border:1px solid black;color:#333;background-color: black;")

-content_for :javascript
  javascript:
    $(function() {
      OpenSeadragon({
        id: "image_container",
        prefixUrl: "",
        showRotationControl: true,
        gestureSettingsTouch: {
          pinchRotate: true
        },
        navImages: {
          zoomIn: {
            REST: "#{asset_path('iiif-images/zoomin_rest.png')}",
            GROUP: "#{asset_path('iiif-images/zoomin_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/zoomin_hover.png')}",
            DOWN: "#{asset_path('iiif-images/zoomin_pressed.png')}"
          },
          zoomOut: {
            REST: "#{asset_path('iiif-images/zoomout_rest.png')}",
            GROUP: "#{asset_path('iiif-images/zoomout_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/zoomout_hover.png')}",
            DOWN: "#{asset_path('iiif-images/zoomout_pressed.png')}"
          },
          home: {
            REST: "#{asset_path('iiif-images/home_rest.png')}",
            GROUP: "#{asset_path('iiif-images/home_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/home_hover.png')}",
            DOWN: "#{asset_path('iiif-images/home_pressed.png')}"
          },
          fullpage: {
            REST: "#{asset_path('iiif-images/fullpage_rest.png')}",
            GROUP: "#{asset_path('iiif-images/fullpage_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/fullpage_hover.png')}",
            DOWN: "#{asset_path('iiif-images/fullpage_pressed.png')}"
          },
          rotateleft: {
            REST: "#{asset_path('iiif-images/rotateleft_rest.png')}",
            GROUP: "#{asset_path('iiif-images/rotateleft_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/rotateleft_hover.png')}",
            DOWN: "#{asset_path('iiif-images/rotateleft_pressed.png')}"
          },
          rotateright: {
            REST: "#{asset_path('iiif-images/rotateright_rest.png')}",
            GROUP: "#{asset_path('iiif-images/rotateright_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/rotateright_hover.png')}",
            DOWN: "#{asset_path('iiif-images/rotateright_pressed.png')}"
          },
          previous: {
            REST: "#{asset_path('iiif-images/previous_rest.png')}",
            GROUP: "#{asset_path('iiif-images/previous_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/previous_hover.png')}",
            DOWN: "#{asset_path('iiif-images/previous_pressed.png')}"
          },
          next: {
            REST: "#{asset_path('iiif-images/next_rest.png')}",
            GROUP: "#{asset_path('iiif-images/next_grouphover.png')}",
            HOVER: "#{asset_path('iiif-images/next_hover.png')}",
            DOWN: "#{asset_path('iiif-images/next_pressed.png')}"
          }
        },
        maxZoomPixelRatio:  10,
        visibilityRatio:    1,
        fitBounds:          true,
        preserveViewport:   true,
        sequenceMode:       false, //we want fromthepage to handle pages sequentially, rather than openseadragon

        tileSources: {
          type: 'image',
          url: '#{file_to_url(@page.canonical_facsimile_url)}'
        }
      });
    });
